//- extends ../layouts/common.pug

html
    head 
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="../styles/style.css">
    body

    nav.navbar.navbar-expand-lg.navbar-light.bg-light
        a.logo-link(href='/')
            img.navbar-avatar(src='../images/logo.png', alt='avatar', class="rounded-circle")
        a.coders-tokyo.ml-2(href='/') Coders.Tokyo
        #navbarNavAltMarkup.collapse.navbar-collapse
            .navbar-nav
                a.nav-item.nav-link.active(href='/').ml-4.pl-3.pr-3 Home
                a.nav-item.nav-link(href='./users').pl-3.pr-3 Rank
                a.nav-item.nav-link(href='./users/create').pl-3.pr-3 Stream
                a.nav-item.nav-link(href='./products').pl-3.pr-3 Wall
                if user
                    a.nav-item.nav-link.user-name= user.name
                    img.user-logo(src='../images/logo.png', alt='avatar', class="rounded-circle")
                    //- img.user-logo(src=user.avatar, alt='avatar', class="rounded-circle")

    .container.pt-4.main
        block content
            

            .d-flex.align-items-center.mb-3
                h1 
                    span.mr-2 
                        select#type(name='type')
                            option(value='Books') Books
                            option(value='Movies') Movies
                            option(value='Songs') Songs
                            option(value='Blogs') Blogs
                    a.btn.btn-primary(href='/users/create') New

                form.ml-auto(action="/users/search", method="GET")
                    input(type="text", name="q" id="searchInput")
                    button.btn.btn-info Search


            table.table
                tr
                    th STT
                    th Cover
                    th Name
                    th Author
                    th(style='padding-left: 85px') Option
                each book, index in products[0].books
                    tr
                        td= index + 1
                        td
                            img(src=book.image style="width: 34")
                        td= book.name
                        td.preview-book(style='width: 30px')= book.author
                        td
                            a.btn.btn-danger.mr-3(href="/users/edit/" + book.id) Edit
                            a.btn.btn-info.mr-3(href="/users/" + book.id) View
                            a.btn.btn-danger.mr-3(href="/users/delete/" + book.id) Delete
                
            //- .d-flex.align-items-center.mt-5.mb-3
            //-     h1 
            //-         span.mr-2 Movies
            //-         a.btn.btn-primary(href='/users/create') New

            //-     form.ml-auto(action="/users/search", method="GET")
            //-         input(type="text", name="q" id="searchInput")
            //-         button.btn.btn-info Search


            //- table.table
            //-     tr
            //-         th STT
            //-         th Cover
            //-         th Name
            //-         th(style='padding: 12px 34px 0px 32px') Actors
            //-         th(style='padding-left: 85px') Option
            //-     each movie, index in products[1].movies
            //-         tr
            //-             td= index + 1
            //-             td
            //-                 img(src=movie.image style="width: 34")
            //-             td= movie.name
            //-             td.preview-movie(style='width: 30px')= movie.actors
            //-             td
            //-                 a.btn.btn-danger.mr-3(href="/users/edit/" + movie.id) Edit
            //-                 a.btn.btn-info.mr-3(href="/users/" + movie.id) View
            //-                 a.btn.btn-danger.mr-3(href="/users/delete/" + movie.id) Delete
            

            //- .d-flex.align-items-center.mt-5.mb-3
            //-     h1 
            //-         span.mr-2 Songs
            //-         a.btn.btn-primary(href='/users/create') New

            //-     form.ml-auto(action="/users/search", method="GET")
            //-         input(type="text", name="q" id="searchInput")
            //-         button.btn.btn-info Search


            //- table.table
            //-     tr
            //-         th STT
            //-         th Cover
            //-         th Name
            //-         th(style='padding: 12px 34px 0px 32px') Singers
            //-         th(style='padding-left: 85px') Option
            //-     each song, index in products[2].songs
            //-         tr
            //-             td= index + 1
            //-             td
            //-                 img(src=song.image style="width: 34")
            //-             td= song.name
            //-             td.preview-song(style='width: 30px')= song.singers
            //-             td
            //-                 a.btn.btn-danger.mr-3(href="/users/edit/" + song.id) Edit
            //-                 a.btn.btn-info.mr-3(href="/users/" + song.id) View
            //-                 a.btn.btn-danger.mr-3(href="/users/delete/" + song.id) Delete

            //- .d-flex.align-items-center.mt-5.mb-3
            //-     h1 
            //-         span.mr-2 Blogs
            //-         a.btn.btn-primary(href='/users/create') New

            //-     form.ml-auto(action="/users/search", method="GET")
            //-         input(type="text", name="q" id="searchInput")
            //-         button.btn.btn-info Search


            //- table.table
            //-     tr
            //-         th STT
            //-         th Name
            //-         th(style='padding: 12px 50px') Author
            //-         th(style='padding-left: 85px')  Option
            //-     each blog, index in products[3].blogs
            //-         tr
            //-             td= index + 1
            //-             td= blog.title
            //-             td.preview-blog(style='width: 30px')= blog.author
            //-             td
            //-                 a.btn.btn-danger.mr-3(href="/users/edit/" + blog.id) Edit
            //-                 a.btn.btn-info.mr-3(href="/users/" + blog.id) View
            //-                 a.btn.btn-danger.mr-3(href="/users/delete/" + blog.id) Delete

            script.
                var input = document.getElementById('searchInput');
                input.value = sessionStorage.getItem('draft');
                input.addEventListener('change', updateSessionStorage);
                function updateSessionStorage(){
                    sessionStorage.setItem('draft', input.value)
                }
            script.
                var choice = 'choice';
                document.addEventListener('DOMContentLoaded',function() {
                document.querySelector('select[name="type"]').onchange=changeEventHandler;
                },false);
                function changeEventHandler(event) {
                    var index;
                    choice = event.target.value;
                    if (choice === 'Books') {
                        index = 0;
                        //render
                        }
                    if (choice === 'Movies') {
                        index = 1;
                        //render
                        }
                    if (choice === 'Songs') {
                        index = 2;
                        //render
                        }
                    else {
                        index = 3;
                        //render
                        }
                }
